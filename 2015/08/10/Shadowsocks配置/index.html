<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<link rel="stylesheet" type="text/css" href="/css/main.css?v="/>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
<title> Shadowsocks配置 | 时针它不停在转动 </title>
</head>
<body>
<div id="">
<header id="header" class="header"><div class="header_wrapper">
<h1 class="title">
<a href="/">时针它不停在转动</a>
</h1>

<ul class="nav">


<li>
<a href="/">首页</a>
</li>


<li>
<a href="/categories">分类</a>
</li>


<li>
<a href="/archives">归档</a>
</li>


<li>
<a href="/about">关于</a>
</li>

</ul>
</div>
</header>
<main id="main" class="main">
<section id="content" class="content">

  <div id="posts" class="posts-expand">
    
<article class="post">
<header class="post-header">
<h1 class="post-title">

Shadowsocks配置
</a>

</h1>
<div class="post-meta">
<span class="post-time">2015-08-10</span>
<span class="post-category">

&nbsp; | &nbsp;
<a class="post-cat-link" href="/categories/工具/">
工具
</a>

</span>
</div>
</header>

<span class="articleBody"><h1 id="Shadowsocks配置"><a href="#Shadowsocks配置" class="headerlink" title="Shadowsocks配置"></a>Shadowsocks配置</h1><blockquote>
<p>一个可穿透防火墙的快速代理。本文以CentOS7作为服务器，Windows+Chrome为客户端组合，进行完整的叙述SS的配置使用。</p>
</blockquote>
<h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><p>敬请参考Github开源项目的说明，作者叙述的非常详细，参考官方的说明，对学习是一件好事。传送门 <a href="https://github.com/shadowsocks/shadowsocks" target="_blank" rel="external">Github项目</a> <a href="https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" target="_blank" rel="external">中文使用说明</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>CentOS:<br><code>yum install python-setuptools &amp;&amp; easy_install pip</code><br><code>pip install shadowsocks</code></p>
<p><a href="https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" target="_blank" rel="external">其他系统</a></p>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>新建配置文件<code>/etc/shadowsocks.json</code>,例如：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	<span class="attr">"server"</span>:<span class="string">"my_server_ip"</span>,</div><div class="line">	<span class="attr">"server_port"</span>:<span class="number">8388</span>,</div><div class="line">	<span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</div><div class="line">	<span class="attr">"local_port"</span>:<span class="number">1080</span>,</div><div class="line">	<span class="attr">"password"</span>:<span class="string">"mypassword"</span>,</div><div class="line">	<span class="attr">"timeout"</span>:<span class="number">300</span>,</div><div class="line">	<span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</div><div class="line">	<span class="attr">"fast_open"</span>: <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>server</td>
<td>服务器监听地址</td>
</tr>
<tr>
<td>server_port</td>
<td>服务端口</td>
</tr>
<tr>
<td>local_address</td>
<td>本地监听地址</td>
</tr>
<tr>
<td>local_port</td>
<td>本地端口</td>
</tr>
<tr>
<td>password</td>
<td>密码</td>
</tr>
<tr>
<td>timeout</td>
<td>超时，单位s</td>
</tr>
<tr>
<td>method</td>
<td>加密方式，默认”aes-256-cfb”，<a href="https://github.com/shadowsocks/shadowsocks/wiki/Encryption" target="_blank" rel="external">详细</a></td>
</tr>
<tr>
<td>fast_open</td>
<td>TFO(<a href="https://zh.wikipedia.org/wiki/TCP_%E5%BF%AB%E9%80%9F%E6%89%93%E5%BC%80" target="_blank" rel="external">TCP快速打开</a>)，<a href="https://github.com/shadowsocks/shadowsocks/wiki/TCP-Fast-Open" target="_blank" rel="external">详细</a></td>
</tr>
</tbody>
</table>
<p> <strong>建议</strong>：不要使用默认的8388端口，可以更改为其他未被占用的端口。   </p>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>前台运行\重启\停止：<br><code>ssserver -c /etc/shadowsocks.json start\resatrt\stop</code><br>后台运行重启\停止：<br><code>ssserver -c /etc/shadowsocks.json start\restart\stop -d</code><br>其中-c选项指定配置文件，同样可以使用-h选项查看帮助</p>
<h3 id="添加开机启动"><a href="#添加开机启动" class="headerlink" title="添加开机启动"></a>添加开机启动</h3><p>当服务器重启后，需要手动开启服务。为了方便，我们添加开机启动。当然，本方法是在CentOS 7下利用systemctl的特性进行设定的。同样本方法也可以在CentOS 7 中添加自定义的其他服务。<br><strong>新建文件</strong> /lib/systemd/system/shadowsocks.service，内容如下：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="section">[Unit]</span>  </div><div class="line"><span class="attr">Description</span>=shadowsocks  </div><div class="line"><span class="attr">After</span>=network.target</div><div class="line"><span class="section">   </span></div><div class="line">[Service]  </div><div class="line"><span class="attr">Type</span>=forking  </div><div class="line"><span class="attr">PIDFile</span>=/run/shadowsocks.pid</div><div class="line"><span class="attr">PermissionsStartOnly</span>=<span class="literal">true</span></div><div class="line"><span class="attr">ExecStart</span>=/usr/bin/ssserver --pid-file /run/shadowsocks.pid -c /etc/shadowsocks.json -d start</div><div class="line"><span class="attr">Restart</span>=<span class="literal">on</span>-abort</div><div class="line"><span class="section">   </span></div><div class="line">[Install]  </div><div class="line"><span class="attr">WantedBy</span>=multi-user.target</div></pre></td></tr></table></figure></p>
<p><strong>添加启动项</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl <span class="built_in">enable</span> shadowsocks.service</div></pre></td></tr></table></figure></p>
<p><strong>查看启动状态</strong><br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl <span class="keyword">is</span>-enabled shadowsocks.service</div></pre></td></tr></table></figure></p>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><h3 id="SS客户端安装"><a href="#SS客户端安装" class="headerlink" title="SS客户端安装"></a>SS客户端安装</h3><p>Windows版<a href="https://github.com/shadowsocks/shadowsocks-windows" target="_blank" rel="external">下载</a><br>其他请<a href="https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" target="_blank" rel="external">点击</a><br>安装成功后，编辑服务器（如图），根据配置文件，输入相关信息即可。<br><img src="http://7xjwd1.com1.z0.glb.clouddn.com/Shadowsocks-1.png" alt=""></p>
<h3 id="浏览器配置"><a href="#浏览器配置" class="headerlink" title="浏览器配置"></a>浏览器配置</h3><p><strong>简单方法</strong>当需要使用SS时，把浏览器的代理设置为本地客户端的监听地址即可。<br>但是每次操作很麻烦，我们需要插件接管浏览器代理，方便进行切换，这里在Chrome下推荐<a href="https://github.com/FelisCatus/SwitchyOmega" target="_blank" rel="external">Proxy SwitchyOmega</a>,你可以选在在<a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif" target="_blank" rel="external">Chrome应用商店</a>直接下载安装，同样你也可以<a href="https://github.com/FelisCatus/SwitchyOmega/releases" target="_blank" rel="external">下载插件</a>，手动安装。<br>安装成功后，敬请参考<a href="https://github.com/FelisCatus/SwitchyOmega/wiki/GFWList" target="_blank" rel="external">使用说明</a>,文章描述的非常清楚，本文不在赘述。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>本文的安装方法主要参考官方的说明，文中已经加以链接，同时加上的一些简单配置，比如开机自启动。<br>在实际使用过程中，难免会遇到问题，比如网络不通，访问速度慢。可以尝试更改加密方式、代理端口。同样，其他优化的策略，会随着使用添加上去。</p>
</span>

<footer class="post-footer">

<a class="post-tag-link" href="/tags/Shadowsocks/">#Shadowsocks</a>

<a class="post-tag-link" href="/tags/CentOS-7/">#CentOS 7</a>



<div class="post-nav">
	<div class="post-nav-prev post-nav-item">
	
		<a rel="prev" href="/2015/08/12/Linux文件操作命令/">Linux文件操作命令</a>
	
    </div>
    <div class="post-nav-next post-nav-item">
    
    	<a rel="next" href="/2015/08/06/ConsoleZ-Setings/">ConsoleZ Setings</a>
    
    </div>
</div>

</footer>
</article>


    <div class="post-spread">
      
    </div>
  </div>

</section>
</main>
<footer class="footer" id="footer">
<div class="copyright">
<i class="fa fa-copyright">2015-2017</i>
</div>
</footer>
</div>



</body>
</html>